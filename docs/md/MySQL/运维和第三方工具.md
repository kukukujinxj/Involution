------



# 运维和第三方工具

## 1 Yearning

### 1.1 Yearning简介

- Yearning 开源的MySQL SQL语句审核平台，提供数据库字典查询，查询审计，SQL审核等多种功能。

### 1.2 Yearning功能

- Yearning 工具包含的主要功能如下：
  
    - SQL查询
  
        - 查询导出
  
        - 查询自动补全
  
    - SQL审核
  
        - 流程化工单
        
        - SQL语句检测
        
        - SQL语句执行
        
        - SQL回滚
        
        - 历史审核记录
    
    - 推送
      
        - 站内信工单通知
      
        - E-mail工单推送
      
        - 钉钉webhook机器人工单推送
    
    - 其他
        
        - todoList
      
        - LDAP登陆
      
        - 用户权限及管理
      
        - 拼图式细粒度权限划分

## 2 canal

### 2.1 canal简介

- canal 主要用途是基于MySQL数据库增量日志解析，提供增量数据订阅和消费。

### 2.2 canal功能

- 数据库镜像

- 数据库实时备份

- 索引构建和实时维护(拆分异构索引、倒排索引等)

- 业务 cache 刷新

- 带业务逻辑的增量数据处理

## 3 DataX

### 3.1 DataX简介

- DataX 是阿里巴巴集团内被广泛使用的离线数据同步工具/平台，实现包括 MySQL、Oracle、SqlServer、Postgre、HDFS、Hive、ADS、HBase、TableStore(OTS)、MaxCompute(ODPS)、DRDS等各种异构数据源之间高效的数据同步功能。

## 4 percona-toolkit

### 4.1 percona-toolkit介绍

- percona-toolkit是一组高级命令行工具的集合，可以查看当前服务的摘要信息，磁盘检测，分析慢查询日志，查找重复索引，实现表同步等等。

## 5 MySQLMTOP

### 5.1 MySQLMTOP简介

- MySQLMTOP 是一个由Python+PHP开发的开源MySQL企业监控系统。该系统由Python实现多进程数据采集和告警，PHP实现Web展示和管理。

### 5.2 MySQLMTOP优点

- MySQL服务器无需安装任何Agent，只需在监控WEB界面配置相关数据库信息

- 启动监控进程后，即可对上百台MySQL数据库的状态、连接数、QTS、TPS、数据库流量、复制、性能慢查询等进行实时监控。

- 可以在数据库偏离设定的正常运行阀值(如连接异常，复制异常，复制延迟) 时发送告警邮件通知到DBA进行处理。

- 可以对历史数据归档，通过图表展示数据库近期状态，以便DBA和开发人员能对遇到的问题进行分析和诊断。

## 6 ELK

### 6.1 为什么用ELK

- 在简单应用中，直接在日志文件中 grep就可以获得自己想要的信息。但在规模较大分布式系统中，此方法效率低下，面临问题包括日志量太大如何归档、文本搜索太慢怎么办、如何多维度查询。需要集中化的日志管理，所有服务器上的日志收集汇总。常见解决思路是建立集中式日志收集系统，将所有节点上的日志统一收集，管理，访问。

### 6.2 ELK实现架构

- ELK 最早是 Elasticsearch（简称ES）、Logstash、Kibana 三款开源软件的简称，三款软件后来被同一公司收购，并加入了Xpark、Beats等组件，改名为Elastic Stack，成为现在最流行的开源日志解决方案，虽然有了新名字但大家依然喜欢叫ELK，现在所说的ELK就指的是基于这些开源软件构建的日志系统。

## 7 Prometheus

### 7.1 Prometheus简介

- Prometheus于2012年由SoundCloud创建，目前已经已发展为最热门的分布式监控系统。

- Prometheus是一个时间序列数据库，它涵盖了可以绑定的整个生态系统工具集及其功能。

- Prometheus主要用于对基础设施的监控，包括服务器、数据库、VPS，几乎所有东西都可以通过Prometheus进行监控。

### 7.2 Prometheus优点

- 提供多维度数据模型和灵活的查询方式。通过将监控指标关联多个tag，来将监控数据进行任意维度的组合，并且提供简单的PromQL，还提供查询接口，可以很方便地结合等GUI组件展示数据。

- 在不依赖外部存储的情况下，支持服务器节点的本地存储。通过Prometheus自带的时序数据库，可以完成每秒千万级的数据存储。

- 定义了开发指标数据标准，以基于HTTP的pull方式采集时序数据。只有实现了Prometheus监控数据格式的监控数据才可以被Prometheus采集、汇总。

- 支持通过静态文件配置和动态发现机制发现监控对象，自动完成数据采集。Prometheus目前已经支持Kubernetes、etcd、consul等多种服务发现机制，可以减少运维人员的手动配置环节。

- 易于维护，可以通过二进制文件直接启动，并且提供容器化部署镜像。

- 支持数据的分区采集和联邦部署，支持大规模集群监控。